<!-- <p-toast key="compacct-toast" baseZIndex="99999"></p-toast> -->
<p-toast
  position="center"
  key="OrderNo"
  styleClass="custom-orderno-toast"
  (onClose)="onReject()"
  [modal]="true"
  [autoZIndex]="true"
>
  <ng-template let-message pTemplate="message">
    <div class="row" style="text-align: center">
      <i class="pi pi-id-card" style="font-size: 3em"></i>
      <!-- <h3>{{ message.summary }}</h3>
      <p>{{ message.detail }}</p> -->
      <form>
        <div class="form-group">
          <div class='col-sm-12'>
              <label class="control-label">Order No</label>
              <input class="form-control"
                   name="oRDER_nO"
                   #oRDER_nO = "ngModel"
                   [(ngModel)] ="ClickedOnlineLedger['Order_No']"
                   placeholder="Order No">
          </div>
        </div>
      </form>
    </div>
    <div class="row text-center" style="margin-top: 2em;">
        <button
          type="button"
          pButton
          (click)="onConfirm()"
          label="Yes"
          class="ui-button-success"
        ></button>
        <button
          type="button"
          pButton
          (click)="onReject()"
          label="No"
          class="ui-button-secondary"
        ></button>
    </div>
  </ng-template>
</p-toast>

<div class="row pos-row" >
  <div class="col-lg-3 col-xs-6">
    <div class="small-box bg-aqua">
      <div class="inner">
        <h3>{{TopDataList[0]}}</h3>
        <p>{{TopDataList[0]}}</p>
      </div>
      <div class="icon">
        <i class="fa fa-qrcode"></i>
      </div>
    </div>
  </div>
  <div class="col-lg-3 col-xs-6">
    <div class="small-box bg-green">
      <div class="inner">
        <h3>{{TopDataList[1]}}<sup style="font-size: 20px"></sup></h3>
        <p>{{TopDataList[1]}}</p>
      </div>
      <div class="icon">
        <i class="fa fa-book"></i>
      </div>
    </div>
  </div>
  <div class="col-lg-3 col-xs-6">
    <div class="small-box bg-yellow">
      <div class="inner">
        <h3>{{TopDataList[2]}}</h3>
        <p>{{TopDataList[2]}}</p>
      </div>
      <div class="icon">
        <i class="ion ion-stats-bars"></i>
      </div>
    </div>
  </div>
  <div class="col-lg-3 col-xs-6">
    <div class="small-box bg-red">
      <div class="inner">
        <h3>{{TopDataList[3]}}</h3>
        <p>{{TopDataList[3]}}</p>
      </div>
      <div class="icon">
        <i class="fa fa-calculator"></i>
      </div>
    </div>
  </div>
</div>
<div class="row" style="padding:1em;">
  <div class="col-sm-6">
    <div class="row">
      <!-- <div class="col-sm-3">
        <button class="pos-btn pos-btn-sep shopping" (click)='ShowOnlineDelOrderNo()'>TAKE AWAY</button>
      </div>
      <div class="col-sm-3">
        <button class="pos-btn pos-btn-sep cutlery"  (click)='ShowOnlineDelOrderNo()'>CUSTOM ORDER</button>
      </div>
      <div class="col-sm-3">
        <button class="pos-btn pos-btn-sep shopping">TAKE AWAY</button>
      </div>
      <div class="col-sm-3">
        <button class="pos-btn pos-btn-sep shopping">TAKE AWAY</button>
      </div> -->
      <div class="col-sm-4">
        <div class="info-box  bg-blue-gradient" (click)='ShowCustomerDetailsPopUp()'>
          <span class="info-box-icon"><i class="fa fa-shopping-bag"></i></span>
          <div class="info-box-content">
            <span class="info-box-text" style="font-size: 1.2em;">TAKE AWAY</span>

          </div>
        </div>

      </div>
      <div class="col-sm-4">
        <div class="info-box  bg-blue-gradient" (click)='ShowCustomerDetailsPopUp()'>
          <span class="info-box-icon"><i class="fa fa-cutlery"></i></span>
          <div class="info-box-content">
            <span class="info-box-text" style="font-size: 1.2em;">CUSTOM ORDER</span>

          </div>
        </div>

      </div>
      <div class="col-sm-4" *ngFor='let obj of OnlineLedgerList'>
        <div class="info-box  bg-blue-gradient" (click)='ShowOnlineDelOrderNo(obj)'>
          <span class="info-box-icon"><i class="fa fa-comments-o"></i></span>
          <div class="info-box-content">
            <span class="info-box-text"  style="font-size: 1.2em;">{{obj.Ledger_Name}}</span>

          </div>
        </div>

      </div>
      <div class=" col-sm-4">
        <div class="info-box  bg-blue-gradient">
          <span class="info-box-icon"><i class="fa fa-search"></i></span>
          <div class="info-box-content">
            <span class="info-box-text"  style="font-size: 1.2em;">Browse Bill</span>

          </div>
        </div>

      </div>
      <div class=" col-sm-4">
        <div class="info-box  bg-blue-gradient">
          <span class="info-box-icon"><i class="fa fa-search"></i></span>
          <div class="info-box-content">
            <span class="info-box-text"  style="font-size: 1.2em;">Browse Custom Order</span>

          </div>
        </div>

      </div>
    </div>
  </div>
  <div class="col-sm-6">
    <div class="row">
      <div class="col-sm-12">
        <div class="box box-primary">
          <div class="box-header with-border">
            <h3 class="box-title" style="color: #a2a2a2;font-weight: bolder;">HOLD BILL</h3>
            <div class="box-tools pull-right">
              <!-- Collapse Button -->
              <button type="button" class="btn btn-box-tool" data-widget="collapse">
                <i class="fa fa-minus"></i>
              </button>
            </div>
            <!-- /.box-tools -->
          </div>
          <div class="box-body">
            <div class="table-responsive table-id">
              <p-table [value]="HoldBillDataList"
                       [paginator]="HoldBillDataList.length ? true : false" [rows]="10" [rowHover]="true"
                       [autoLayout]="true" sortMode="multiple"
                       [rowsPerPageOptions]="[10,20,30]"
                       [globalFilterFields]="['Req_No','Req_Date','Cost_Cen_Name','Product_Description','Sale_rate','Amount']"
                       [rowHover]="true"
                       #dt>
                         <ng-template pTemplate="caption">
                             <div class="row">
                                  <div class="col-sm-3 pull-right" style="text-align: right">
                                          <input type="text" pInputText size="50" placeholder="Search" (input)="dt.filterGlobal($event.target.value, 'contains')" class="searchInput form-control">
                                      </div>
                             </div>

                          </ng-template>
                          <ng-template pTemplate="header">
                              <tr>
                                  <th>Bill No</th>
                                  <th>Date</th>
                                  <th>Customer Name</th>
                                  <th>Bill Amount</th>


                              </tr>
                          </ng-template>
                          <ng-template pTemplate="body" let-col>
                              <tr>
                                  <td>{{col.Req_No}}</td>
                                  <td>{{col.Req_Date | date: "dd/MMM/yyyy"}}</td>
                                  <td>{{col.Cost_Cen_Name}}</td>
                                  <td>{{col.amount}}</td>

                              </tr>
                          </ng-template>
                          <ng-template pTemplate="paginatorright" let-state>
                                  Showing {{state.first+1}} of {{(state.first+1) + state.rows}} of  {{state.totalRecords}}
                          </ng-template>
                  </p-table>
              </div>
          </div>
          <div class="box-footer">
            Total : 128
          </div>
        </div>
      </div>
      <div class="col-sm-12">
        <div class="box box-primary">
          <div class="box-header with-border">
            <h3 class="box-title" style="color: #a2a2a2;font-weight: bolder;">HOLD CUSTOM BILL</h3>
            <div class="box-tools pull-right">
              <button type="button" class="btn btn-box-tool" data-widget="collapse">
                <i class="fa fa-minus"></i>
              </button>
            </div>
          </div>
          <div class="box-body">
            <div class="table-responsive table-id">
              <p-table [value]="HoldCustomBillDataList"
                       [paginator]="HoldCustomBillDataList.length ? true : false" [rows]="10" [rowHover]="true"
                       [autoLayout]="true" sortMode="multiple"
                       [rowsPerPageOptions]="[10,20,30]"
                       [globalFilterFields]="['Req_No','Req_Date','Cost_Cen_Name','Product_Description','Sale_rate','Amount']"
                       [rowHover]="true"
                       #dt2>
                         <ng-template pTemplate="caption">
                             <div class="row">
                                  <div class="col-sm-3 pull-right" style="text-align: right">
                                          <input type="text" pInputText size="50" placeholder="Search" (input)="dt2.filterGlobal($event.target.value, 'contains')" class="searchInput form-control">
                                      </div>
                             </div>

                          </ng-template>
                          <ng-template pTemplate="header">
                              <tr>
                                  <th>Bill No</th>
                                  <th>Date</th>
                                  <th>Customer Name</th>
                                  <th>Bill Amount</th>


                              </tr>
                          </ng-template>
                          <ng-template pTemplate="body" let-col>
                              <tr>
                                  <td>{{col.Req_No}}</td>
                                  <td>{{col.Req_Date | date: "dd/MMM/yyyy"}}</td>
                                  <td>{{col.Cost_Cen_Name}}</td>
                                  <td>{{col.amount}}</td>

                              </tr>
                          </ng-template>
                          <ng-template pTemplate="paginatorright" let-state>
                                  Showing {{state.first+1}} of {{(state.first+1) + state.rows}} of  {{state.totalRecords}}
                          </ng-template>
                  </p-table>
              </div>
          </div>
          <div class="box-footer">
            Total : 128
          </div>
        </div>
      </div>
      <div class="col-sm-12">
        <div class="box box-success">
          <div class="box-header with-border">
            <h3 class="box-title" style="color: #a2a2a2;font-weight: bolder;">OUT FOR DELIVERY</h3>
            <div class="box-tools pull-right">
              <button type="button" class="btn btn-box-tool" data-widget="collapse">
                <i class="fa fa-minus"></i>
              </button>
            </div>
          </div>
          <div class="box-body">

            <div class="table-responsive table-id">
              <p-table [value]="OutForDeliveryDataList"
                       [paginator]="OutForDeliveryDataList.length ? true : false" [rows]="10" [rowHover]="true"
                       [autoLayout]="true" sortMode="multiple"
                       [rowsPerPageOptions]="[10,20,30]"
                       [globalFilterFields]="['Req_No','Req_Date','Cost_Cen_Name','Product_Description','Sale_rate','Amount']"
                       [rowHover]="true"
                       #dt3>
                         <ng-template pTemplate="caption">
                             <div class="row">
                                  <div class="col-sm-3 pull-right" style="text-align: right">
                                          <input type="text" pInputText size="50" placeholder="Search" (input)="dt3.filterGlobal($event.target.value, 'contains')" class="searchInput form-control">
                                      </div>
                             </div>

                          </ng-template>
                          <ng-template pTemplate="header">
                              <tr>
                                  <th>Order No</th>
                                  <th>Delivery Date&Time</th>
                                  <th>Customer Name</th>
                                  <th>Mobile</th>
                                  <th>Total Amount</th>
                                  <th>Adv</th>
                                  <th>Due</th>


                              </tr>
                          </ng-template>
                          <ng-template pTemplate="body" let-col>
                              <tr>
                                  <td>{{col.Req_No}}</td>
                                  <td>{{col.Req_Date | date: "dd/MMM/yyyy"}}</td>
                                  <td>{{col.Cost_Cen_Name}}</td>
                                  <td>{{col.amount}}</td>
                                  <td><b>{{col.amount}}</b></td>
                                  <td class="text-success">{{col.amount}}</td>
                                  <td class="text-danger">{{col.amount}}</td>

                              </tr>
                          </ng-template>
                          <ng-template pTemplate="paginatorright" let-state>
                                  Showing {{state.first+1}} of {{(state.first+1) + state.rows}} of  {{state.totalRecords}}
                          </ng-template>
                  </p-table>
              </div>
          </div>
          <div class="box-footer">
            Total : 128
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<p-dialog header="Customer Details" [appendTo]="'body'"
 [(visible)]="CustomerDetailsPopUpFlag"
 [modal]="true" [responsive]="true"
 [closeOnEscape]="true"
 [style]="{ width: '36%', minWidth: '200px' }"
 >

  <form name="CustomerDetailsForm" #CustomerDetailsForm="ngForm" novalidate>
    <div>
        <div class="form-group">
        <div class='col-sm-12'>
            <label class="control-label">Customer Mobile <sup class="text-danger">*</sup></label>
            <input class="form-control"
                 name="Costomer_Mobile"
                 #Costomer_Mobile = "ngModel"
                 [(ngModel)] ="Objcustomerdetail.Mobile"
                 (change)='GetCustomerDetails()'
                 maxlength="10"
                 id='Customer'
                 (keydown)="onKeydownMain($event, 'CustomerName')"
                 CompacctDigitonly="true"
                 [ngClass]="{
                   clearance:
                     (CustomerDetailsFormSubmitted && Costomer_Mobile.errors?.required) ||
                     (Costomer_Mobile.errors?.minlength && Costomer_Mobile.touched)
                 }"
                 required
                 placeholder="Customer Mobile">
        </div>
        <div class='col-sm-12'>
            <label class="control-label">Customer Name</label>
            <input class="form-control"
                 name="Customer_Name"
                 id='CustomerName'
                 #Customer_Name = "ngModel"
                 (keydown)="onKeydownMain($event, 'Address')"
                 [(ngModel)] ="Objcustomerdetail.Contact_Name"
                 placeholder="Customer Name">
        </div>
        <div class='col-sm-12'>
          <label class="control-label">Address</label>
          <input class="form-control"
               name="Address"
               id='Address'
               #Address = "ngModel"
               (keydown)="onKeydownMain($event, 'Customer_DOB')"
               [(ngModel)] ="Objcustomerdetail.Address"
               placeholder="Address">
      </div>
        <div class='col-sm-12'>
            <label class="control-label">Date of Birth</label>
            <ejs-datepicker  [format]="'dd/MMM/yyyy'"
               id='Customer_DOB'
               name="Customer_DOB"
               #Customer_DOB = "ngModel"
               (keydown)="onKeydownMain($event, 'Customer_Anni')"
               [(ngModel)] ="Objcustomerdetail.DOB"
               placeholder="dd/MMM/yyyy">
          </ejs-datepicker>
        </div>

        <div class='col-sm-12'>
            <label class="control-label">Anniversary</label>
            <ejs-datepicker  [format]="'dd/MMM/yyyy'"
               id='Customer_Anni'
               name="Customer_Anni"
               #Customer_Anni = "ngModel"
               (keydown)="onKeydownMain($event, 'Customer_GST')"
               [(ngModel)] ="Objcustomerdetail.DOA"
               placeholder="dd/MMM/yyyy">
          </ejs-datepicker>

        </div>
        <div class='col-sm-12'>
            <label class="control-label">Customer GST <sup class="text-danger">*</sup></label>
            <input class="form-control"
                 #Customer_Gst
                 name = "Customer_GST"
                 placeholder = "Customer GST"
                 #Customer_GST = "ngModel"
                 id='Customer_GST'
                 (keydown)="onKeydownMain($event, 'Bill_Remarks')"
                 (ngModelChange)='checkGSTvalid(Objcustomerdetail.GST_No)'
                 [(ngModel)] ="Objcustomerdetail.GST_No"
                 minlength = "15"
                 maxlength = "15"
                 [ngClass]="{
                   clearance:
                     (GSTvalidFlag) ||
                     (Customer_GST.errors?.minlength && Customer_GST.touched)
                 }"
                 required>

        </div>
        <div class='col-sm-12'>
        <label class="control-label">Remarks</label>
        <textarea class="form-control"
                 name="Bill_Remarks"
                 #Bill_Remarks = "ngModel"
                 id='Bill_Remarks'
                 (keydown)="onKeydownMain($event, 'save')"
                 [(ngModel)] ="Objcustomerdetail.Remarks"
                 placeholder="Remarks"></textarea>
        <!-- <textarea
        [rows]="3" [cols]="20" pInputTextarea autoResize="autoResize"
        ></textarea> -->
       </div>
    </div>
</div>
  </form>
  <p-footer>
    <button type="button" (click)="CustomerDetailsPopUpFlag = false" class="btn btn-default">
      <i class="fa fa-fw fa-close" ></i>&nbsp;  CANCEL
    </button>
    <button type="button" class="btn btn-primary" (click)="OnCustomerDetailsSubmit(CustomerDetailsForm.form.valid)">
      <i class="pi pi-check" ></i>&nbsp; OK
    </button>
  </p-footer>
</p-dialog>
