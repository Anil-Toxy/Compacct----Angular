<!-- <p-toast key="compacct-toast" baseZIndex="99999">
</p-toast>
<p-toast position="center" key="c" (onClose)="onReject()" [modal]="true" [autoZIndex]="true">
    <ng-template let-message pTemplate="message">
        <div style="text-align: center">
            <i class="pi pi-exclamation-triangle" style="font-size: 3em"></i>
            <h3>{{message.summary}}</h3>
            <p>{{message.detail}}</p>
        </div>

        <div class="ui-g ui-fluid">
          <div class="ui-g-6">
              <button type="button" pButton (click)="onConfirm()" label="Yes" class="ui-button-success"></button>
          </div>
          <div class="ui-g-6">
              <button type="button" pButton (click)="onReject()" label="No" class="ui-button-secondary"></button>
          </div>
      </div>

    </ng-template>
</p-toast>

<div class="row">
    <div class="col-xs-12">
        <div class="box box-primary">
            <div class="form-horizontal">
                <div class="box-body">
                    <p-tabView [activeIndex]="tabIndexToView" (onChange)="TabClick($event)">
                        <p-tabPanel headerStyleClass="compacct-tabs" [header]="items[0]" leftIcon="glyphicon glyphicon-list-alt">
                            <form name="SearchForm" #SearchForm="ngForm" novalidate>
                            <div class="form-group">
                                <div class="col-sm-4">
                                    <label class="control-label">Date</label>

                                    <app-compacct-daterangepicker (DaterangeObj)="getDateRange($event)">
                                    </app-compacct-daterangepicker>

                                </div>

                                <div class="col-sm-3">
                                    <button class="btn btn-primary custombutton3" data-toggle="modal" (click)="GetSearchedlist()" id="load" [disabled]="seachSpinner">
                                      <p-progressSpinner
                                        *ngIf="seachSpinner"
                                        [style]="{ width: '15px', height: '15px' }"
                                        strokeWidth="8"
                                        animationDuration=".5s"
                                      ></p-progressSpinner>
                                      <span
                                        *ngIf="!seachSpinner"
                                        class="glyphicon glyphicon-search"
                                      ></span
                                      >&nbsp;Search
                                    </button>
                                </div>
                                <div class="col-sm-2">
                                    <label class="control-label"></label>

                                    <div class="checkBox">
                                        <label class="pullright2">
                                       <p-checkbox  [(ngModel)]="ApprovedFLag"  name="Approved"  (onChange)="ApprovedCheckBox()"  binary="true" ></p-checkbox>
                                       Approved
                                   </label>
                                    </div>
                                </div>
                            </div>
                            </form>
                            <div class="row">
                                <div class="col-sm-8">
                                    <h5><strong></strong></h5>
                                </div>
                            </div>
                            <div class="table-responsive table-id">
                                <p-table [value]="Searchedlist" #dt1 [paginator]="true" [rows]="100" [loading]="seachSpinner" [rowHover]="true" [autoLayout]="true" sortMode="multiple" [rowsPerPageOptions]="[10,25,50,100]" [rowHover]="true" [globalFilterFields]='["GRN_No","GRN_Date","Sub_Ledger_Name","Cost_Cen_Name","godown_name","RDB_No_Date","SE_No_Date","PO_Doc_No","PO_Doc_Date","Mode_Of_transport",
                                  "LR_No_Date","Vehicle_No","Remarks","Quantity_Remarks","Quality_Rejection_Remarks","Deduction_For_Rejection"] '>
                                    <ng-template pTemplate="caption">
                                        <div class="row">
                                            <div class="col-sm-3 pull-right" style="text-align: right">
                                                <input type="text" pInputText size="50" placeholder="Search" (input)="dt1.filterGlobal($event.target.value, 'contains')" class="searchInput form-control">
                                            </div>
                                        </div>

                                    </ng-template>
                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th style="width:5em">Action</th>
                                            <th>GRN No</th>
                                            <th>GRN Date</th>
                                            <th>Supplier</th>
                                            <th>Cost Center</th>
                                            <th>Godown</th>
                                            <th>RDB No Date</th>
                                            <th>SE No Date</th>
                                            <th>PO Doc No</th>
                                            <th>PO Doc Date</th>
                                            <th>Mode Of Transport</th>
                                            <th>LR No Date</th>
                                            <th>Vehicle No</th>
                                            <th>Quantity Remarks</th>
                                            <th>Quality / Rejection Remarks</th>
                                            <th>Deduction For Rejection</th>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="body" let-col>
                                        <tr>
                                            <td>
                                                <div class="dropdown">
                                                    <button class="btn btn-default btn-sm tableButton dropdown-toggle" type="button" data-toggle="dropdown" style="height:27px">
                                                            <i class="fa fa-fw fa-bars"></i>
                                                            <span class="caret"></span>
                                                        </button>
                                                    <ul class="dropdown-menu">
                                                        <li>
                                                                <a (click)="Delete(col)">
                                                                    <i class="fa fa-trash" aria-hidden="true"></i>
                                                                    Delete
                                                                </a>
                                                            </li>
                                                    </ul>
                                                </div>      
                                            </td>
                                            <td>{{col.GRN_No}}</td>
                                            <td>{{col.GRN_Date | date : 'dd/MMM/yyyy'}}</td>
                                            <td>{{col.Sub_Ledger_Name}}</td>
                                            <td>{{col.Cost_Cen_Name ? col.Cost_Cen_Name : '-'}}</td>
                                            <td>{{col.godown_name }}</td>
                                            <td>{{col.RDB_No_Date }}</td>
                                            <td>{{col.SE_No_Date }}</td>
                                            <td>{{col.PO_Doc_No }}</td>
                                            <td>{{col.PO_Doc_Date | date : 'dd/MMM/yyyy' }}</td>
                                            <td>{{col.Mode_Of_transport }}</td>
                                            <td>{{col.LR_No_Date }}</td>
                                            <td>{{col.Vehicle_No }}</td>
                                            <td>{{col.Quantity_Remarks }}</td>
                                            <td>{{col.Quality_Rejection_Remarks }}</td>
                                            <td>{{col.Deduction_For_Rejection }}</td>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="paginatorright" let-state>
                                        Showing {{state.first+1}} of {{(state.first+1) + state.rows}} of {{state.totalRecords}}
                                    </ng-template>
                                </p-table>

                            </div>

                        </p-tabPanel>

                        <p-tabPanel headerStyleClass="compacct-tabs" [header]="items[1]" leftIcon="glyphicon glyphicon-floppy-save">
                                        <form name="PurChallanGRNForm" #PurChallanGRNForm="ngForm" novalidate>
                                            <div class="form-group" style="padding: 1em;">
                                                <h5 style="
                                                padding: 0.5em 1em;
                                                background: #c1c1c185;
                                                border-top: 5px solid #3c8dbc;
                                                border-bottom: 1px solid #c6c6c6;
                                                margin-top: -10px;
                                                ">
                                                <i class="fa fa-fw fa-fax">
                                                </i> &nbsp;<strong>Vendor Details :</strong>
                                            </h5>
                                            <div class="form-group">
                                                <div class="col-sm-6">
                                                    <label class="control-label">Vendor <sup class="text-danger">*</sup></label>
                                                    <p-dropdown [options]="VendorList" name="vendor" [(ngModel)]="ObjPurBillChallan.Sub_Ledger_ID" [showClear]="true" [emptyFilterMessage]="' No Product Found'" (onChange)="VenderNameChange()" [filter]="true" filterBy="label,value.name" [resetFilterOnHide]="true" [placeholder]="'Select Vendor'"
                                                        [virtualScroll]="true" itemSize="30" #vendor="ngModel"  [required]="true" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && vendor?.errors?.required}" required>
                                                    </p-dropdown>
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Billing Name </label>
                                                    <input class="form-control" name="billingname" #billingname="ngModel" [(ngModel)]="ObjPurBillChallan.Sub_Ledger_Billing_Name" placeholder="Billing Name" [disabled]="true" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && billingname?.errors?.required}" >
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Choose Address<sup class="text-danger">*</sup></label>
                                                    <select class="form-control" name="chooseaddress" #chooseaddress="ngModel" [(ngModel)]="ObjPurBillChallan.Sub_Ledger_Address_1" [ngClass]="{'clearance': PurChallanGRNFormSubmitted && chooseaddress?.errors?.required}" (change)="GetChooseAddress()" required>
                                                          <option  [ngValue]="undefined">Select</option>
                                                          <option value="MAIN" *ngIf="ObjPurBillChallan.Sub_Ledger_ID">MAIN</option>
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-3">
                                                    <label class="control-label">State<sup class="text-danger">*</sup></label>
                                                    <select class="form-control" name="state" #state="ngModel" [(ngModel)]="ObjPurBillChallan.Sub_Ledger_State"  [disabled]="maindisabled" [ngClass]="{'clearance': PurChallanGRNFormSubmitted && state?.errors?.required}" required>
                                                         <option  [ngValue]="undefined">Select</option>
                                                            <option  *ngFor="let option of StateList" value="{{option.State}}">
                                                            {{option.State}}
                                                            </option>
                                                     </select>
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">GST No </label>
                                                    <input class="form-control" name="gstno" #gstno="ngModel" [(ngModel)]="ObjPurBillChallan.Sub_Ledger_GST_No" placeholder="GST No" [disabled]="maindisabled" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && gstno?.errors?.required}" >
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Address </label>
                                                    <input class="form-control" name="address" #address="ngModel" [(ngModel)]="ObjPurBillChallan.Sub_Ledger_Address_2" placeholder="Address" [disabled]="true" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && address?.errors?.required}" >
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Land Mark </label>
                                                    <input class="form-control" name="landmark" #landmark="ngModel" [(ngModel)]="ObjPurBillChallan.Sub_Ledger_Land_Mark" placeholder="Land Mark" [disabled]="true" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && landmark?.errors?.required}" >
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-3">
                                                    <label class="control-label">PIN </label>
                                                    <input class="form-control" name="pin" #pin="ngModel" [(ngModel)]="ObjPurBillChallan.Sub_Ledger_Pin" placeholder="PIN" [disabled]="true" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && pin?.errors?.required}" >
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">District </label>
                                                    <input class="form-control" name="district" #district="ngModel" [(ngModel)]="ObjPurBillChallan.Sub_Ledger_District" placeholder="District" [disabled]="true" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && district?.errors?.required}" >
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Country </label>
                                                    <input class="form-control" name="country" #country="ngModel" [(ngModel)]="ObjPurBillChallan.Sub_Ledger_Country" placeholder="Country" [disabled]="true" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && country?.errors?.required}" >
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Email </label>
                                                    <input class="form-control" name="email" #email="ngModel" [(ngModel)]="ObjPurBillChallan.Sub_Ledger_Email" placeholder="Email" [disabled]="true" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && email?.errors?.required}" >
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-3">
                                                    <label class="control-label">Contact No </label>
                                                    <input class="form-control" name="contactno" #contactno="ngModel" [(ngModel)]="ObjPurBillChallan.Sub_Ledger_Mobile_No" placeholder="Contact No" [disabled]="true" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && contactno?.errors?.required}" >
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">PAN No </label>
                                                    <input class="form-control" name="panno" #panno="ngModel" [(ngModel)]="ObjPurBillChallan.Sub_Ledger_PAN_No" placeholder="PAN No" [disabled]="true" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && panno?.errors?.required}" >
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">CIN </label>
                                                    <input class="form-control" name="cin" #cin="ngModel" [(ngModel)]="ObjPurBillChallan.Sub_Ledger_CIN_No" placeholder="CIN" [disabled]="true" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && cin?.errors?.required}" >
                                                </div>
                                            </div>
                                            </div>

                                            <div class="form-group" style="padding: 1em;">
                                                <h5 style="
                                                padding: 0.5em 1em;
                                                background: #c1c1c185;
                                                border-top: 5px solid #3c8dbc;
                                                border-bottom: 1px solid #c6c6c6;
                                                margin-top: -10px;
                                                ">
                                                <i class="fa fa-fw fa-fax">
                                                </i> &nbsp;<strong>CostCente and Other Details :</strong>
                                            </h5>
                                            <div class="form-group">
                                                <div class="col-sm-3">
                                                    <label class="control-label">CostCenter<sup class="text-danger">*</sup></label>
                                                    <select class="form-control" name="costcenter" #costcenter="ngModel" [(ngModel)]="ObjPurBillChallan.Cost_Cen_ID" [ngClass]="{'clearance': PurChallanGRNFormSubmitted && costcenter?.errors?.required}" (change)="GetCosCenAddress()" required>
                                                          <option  [ngValue]="undefined">Select</option>
                                                          <option  *ngFor="let option of CostCenterList" value="{{option.Cost_Cen_ID}}">
                                                            {{option.Cost_Cen_Name}}
                                                          </option>
                                                    </select>
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Address </label>
                                                    <input class="form-control" name="costcenaddress" #costcenaddress="ngModel" [(ngModel)]="ObjPurBillChallan.Cost_Cen_Address1" placeholder="Address" [disabled]="true" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && costcenaddress?.errors?.required}">
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Address </label>
                                                    <input class="form-control" name="address2" #address2="ngModel" [(ngModel)]="ObjPurBillChallan.Cost_Cen_Address2" placeholder="Address" [disabled]="true" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && address2?.errors?.required}">
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">State </label>
                                                    <input class="form-control" name="costcenstate" #costcenstate="ngModel" [(ngModel)]="ObjPurBillChallan.Cost_Cen_State" placeholder="State" [disabled]="true" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && costcenstate?.errors?.required}">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-3">
                                                    <label class="control-label">GST No </label>
                                                    <input class="form-control" name="costcengstno" #costcengstno="ngModel" [(ngModel)]="ObjPurBillChallan.Cost_Cen_GST_No" placeholder="GST No" [disabled]="true" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && costcengstno?.errors?.required}">
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Location </label>
                                                    <input class="form-control" name="location" #location="ngModel" [(ngModel)]="ObjPurBillChallan.Cost_Cen_Location" placeholder="Location" [disabled]="true" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && location?.errors?.required}">
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">PIN </label>
                                                    <input class="form-control" name="costcenpin" #costcenpin="ngModel" [(ngModel)]="ObjPurBillChallan.Cost_Cen_PIN" placeholder="Address" [disabled]="true" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && costcenpin?.errors?.required}">
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">District </label>
                                                    <input class="form-control" name="costcendistrict" #costcendistrict="ngModel" [(ngModel)]="ObjPurBillChallan.Cost_Cen_District" placeholder="District" [disabled]="true" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && costcendistrict?.errors?.required}">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-3">
                                                    <label class="control-label">Country </label>
                                                    <input class="form-control" name="costcencountry" #costcencountry="ngModel" [(ngModel)]="ObjPurBillChallan.Cost_Cen_Country" placeholder="Country" [disabled]="true" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && costcencountry?.errors?.required}">
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Mobile </label>
                                                    <input class="form-control" name="costcenmobile" #costcenmobile="ngModel" [(ngModel)]="ObjPurBillChallan.Cost_Cen_Mobile" placeholder="Mobile" [disabled]="true" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && costcenmobile?.errors?.required}">
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Phone </label>
                                                    <input class="form-control" name="costcenphone" #costcenphone="ngModel" [(ngModel)]="ObjPurBillChallan.Cost_Cen_Phone" placeholder="Phone" [disabled]="true" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && costcenphone?.errors?.required}">
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Email </label>
                                                    <textarea class="form-control" name="costcenemail" #costcenemail="ngModel" [(ngModel)]="ObjPurBillChallan.Cost_Cen_Email" placeholder="Email" [disabled]="true" [ngClass]="{'clearance':GRN2FormSubmitted && costcenemail?.errors?.required}" ></textarea>
                                                </div>
                                            </div>
                                            </div>

                                            <hr class="box boxboxDivide-primary ng-scope">

                                            <div class="form-group">
                                                <div class="col-sm-3">
                                                    <label>Date <sup class="text-danger">*</sup></label>
                                                    <div class="input-group date">
                                                        <div class="input-group-addon">
                                                         <i class="fa fa-calendar"></i>
                                                    </div>
                                                    <ejs-datepicker [format]="'dd/MMM/yyyy'" [(value)]='DocDate'></ejs-datepicker>
                                                    </div>
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Project</label>
                                                    <select class="form-control" name="project" #project="ngModel" [(ngModel)]="ObjPurBillChallan.Project_ID" [ngClass]="{'clearance': PurChallanGRNFormSubmitted && project?.errors?.required}" (change)="GetGodown()">
                                                          <option  [ngValue]="undefined">Select</option>
                                                          <option  *ngFor="let option of CostCenterlist" value="{{option.Cost_Cen_ID}}">
                                                            {{option.Cost_Cen_Name}}
                                                          </option>
                                                    </select>
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">CN No </label>
                                                    <input class="form-control" name="cnno" #cnno="ngModel" [(ngModel)]="ObjPurBillChallan.CN_No" placeholder="CN No" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && cnno?.errors?.required}" >
                                                </div>
                                                <div class="col-sm-3">
                                                    <label>CN Date</label>
                                                    <div class="input-group date">
                                                        <div class="input-group-addon">
                                                         <i class="fa fa-calendar"></i>
                                                    </div>
                                                    <ejs-datepicker [format]="'dd/MMM/yyyy'" [(value)]='CNDate' placeholder="dd/MMM/yyyy"></ejs-datepicker>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <div class="col-sm-3">
                                                    <label class="control-label">Currency <sup class="text-danger">*</sup></label>
                                                    <select class="form-control" name="currency" #currency="ngModel" [(ngModel)]="ObjPurBillChallan.Currency_ID" [ngClass]="{'clearance': PurChallanGRNFormSubmitted && currency?.errors?.required}" (change)="GetGodown()" required>
                                                          
                                                          <option  value="1">INR</option>
                                                          <option  value="2">$</option>
                                                          <option  value="3">GBP</option>
                                                    </select>
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Revenue Cost Center <sup class="text-danger">*</sup></label>
                                                    <select class="form-control" name="revcostcen" #revcostcen="ngModel" [(ngModel)]="ObjPurBillChallan.Revenue_Cost_Cent_ID" [ngClass]="{'clearance': PurChallanGRNFormSubmitted && revcostcen?.errors?.required}" (change)="GetGodown()" required>
                                                          <option  [ngValue]="undefined">Select</option>
                                                          <option  *ngFor="let option of CostCenterlist" value="{{option.Cost_Cen_ID}}">
                                                            {{option.Cost_Cen_Name}}
                                                          </option>
                                                    </select>
                                                </div>
                                                <div class="col-sm-3">
                                                    <label class="control-label">Supplier Bill No </label>
                                                    <input class="form-control" name="suppbillno" #suppbillno="ngModel" [(ngModel)]="ObjPurBillChallan.Supplier_Bill_No" placeholder="CN No" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && suppbillno?.errors?.required}" >
                                                </div>
                                                <div class="col-sm-3">
                                                    <label>Supplier Bill Date</label>
                                                    <div class="input-group date">
                                                        <div class="input-group-addon">
                                                         <i class="fa fa-calendar"></i>
                                                    </div>
                                                    <ejs-datepicker [format]="'dd/MMM/yyyy'" [(value)]='SupplierBillDate' placeholder="dd/MMM/yyyy"></ejs-datepicker>
                                                    </div>
                                                </div>
                                            </div>
                                            <br>
                                            <hr class="box boxboxDivide-primary ng-scope">
                                        </form>
                            <div class="form-group" *ngIf="GRNnoList.length">
                            <div class="col-sm-6">
                                    <label class="control-label">Select GRN No<sup class="text-danger">*</sup> &nbsp;  </label>
                                    <p-multiSelect itemSize="30" [options]="GRNFilter" [styleClass]="'compacct-multiselect'" name="grnno" [(ngModel)]="SelectedGRNno" [filter]="true" filterBy="label,value.name" (onChange)="filterGRNnoList()" [resetFilterOnHide]="true">
                                    </p-multiSelect>
    
                                </div>
                            </div>
                            <br>
                            <div class="table-responsive no-padding">
                                <table class="table table-bordered">
                                    <thead style="background-color:#3c8dbc;color:white;">
                                        <tr>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Sl.No.</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">GRN No</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Product Details</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">HSN No</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Batch No</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Qty</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Unit</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Rate</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Total Amt</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Taxable Amt</th>
                                            <th nowrap colspan="2" class="text-center" style="vertical-align:middle">CGST</th>
                                            <th nowrap colspan="2" class="text-center" style="vertical-align:middle">SGST</th>
                                            <th nowrap colspan="2" class="text-center" style="vertical-align:middle">IGST</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Net Amount</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Stock Point</th>
                                            <th rowspan="2">Delete</th>
                                        </tr>
                                        <tr>
                                            <th>Rate</th>
                                            <th>Amt</th>
                                            <th>Rate</th>
                                            <th>Amt</th>
                                            <th>Rate</th>
                                            <th>Amt</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let obj of ProductDetails ; let ind = index; let odd = odd;" [class.even]="odd">
                                            <td>{{ ind + 1 }}</td>
                                            <td>{{obj.GRN_No}}</td>
                                            <td>{{obj.Product_Description}}</td>
                                            <td>{{obj.HSN_Code}}</td>
                                            <td>{{obj.Batch_No}}</td>
                                                <input type="text" [name]="obj.Product_ID" [(ngModel)]='obj.Accepted_Qty' (ngModelChange)="AfterDiscCalChange(obj)" class="form-control" style="width: 80px;" />
                                            </td>
                                            <td>{{obj.UOM}}</td>
                                            <td>{{obj.Rate}}</td>
                                            <td>{{obj.Total_Amount}}</td>
                                            <td>{{obj.Taxable_Amount}}</td>
                                            <td>{{obj.Accepted}}</td>
                                            <td>{{obj.Rate}}</td>
                                            <td>{{obj.Taxable_Value}}</td>
                                            <td>{{obj.GST_Tax_Per}}</td>
                                            <td>{{obj.Tax}}</td>
                                            <td>{{obj.Total_Amount}}</td>
                                            <td>{{obj.Total_Amount}}</td>
                                            <td>{{obj.Net_Amount}}</td>
                                            <td>{{obj.Tax}}</td>
                                           <td *ngIf="!obj?.deleteflag"><button (click)="delete(ind)" class="btn danger"><i class="fa fa-trash"></i></button></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <br>
                            <hr class="box boxboxDivide-primary ng-scope">

                            <div class="form-group">
                                <div class="col-sm-3">
                                    <label class="control-label">Term Name <sup class="text-danger">*</sup></label>
                                    <select class="form-control" name="termname" #termname="ngModel" [(ngModel)]="ObjPurBillChallan.Term_Name" [ngClass]="{'clearance': PurChallanGRNFormSubmitted && termname?.errors?.required}" required>
                                          <option  [ngValue]="undefined">Select</option>
                                          <option  *ngFor="let option of CostCenterlist" value="{{option.Cost_Cen_ID}}">
                                            {{option.Cost_Cen_Name}}
                                          </option>
                                    </select>
                                </div>
                                <div class="col-sm-2">
                                    <label class="control-label">HSN No </label>
                                    <input class="form-control" name="hsntermno" #hsntermno="ngModel" [(ngModel)]="ObjPurBillChallan.HSN_No" placeholder="HSN No" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && hsntermno?.errors?.required}" >
                                </div>
                                <div class="col-sm-2">
                                    <label class="control-label">Term Amount <sup class="text-danger">*</sup></label>
                                    <input class="form-control" name="termamt" #termamt="ngModel" [(ngModel)]="ObjPurBillChallan.Term_Amount" placeholder="Term Amount" [ngClass]="{'clearance':PurChallanGRNFormSubmitted && termamt?.errors?.required}" required>
                                </div>
                                <div class="col-sm-1">
                                    <button type="button" class="btn btn-primary pull-right" style="margin-top: 28px;" (click)="GetIndentList()" id="load" [disabled]="SpinnerShow" [disabled]="inputBoxDisabled">
                                            <p-progressSpinner *ngIf="SpinnerShow" [style]="{width: '15px', height: '15px'}" strokeWidth="8"  animationDuration=".5s"></p-progressSpinner>
                                         <span *ngIf="!SpinnerShow" class="glyphicon glyphicon-save"></span> Add 
                                    </button>
                                </div>
                            </div>
                            <br>
                            
                            <div class="table-responsive no-padding">
                                <table class="table table-bordered">
                                    <thead style="background-color:#3c8dbc;color:white;">
                                        <tr>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Sl.No.</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Term Name</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">HSN No</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Term Amount</th>
                                            <th nowrap colspan="2" class="text-center" style="vertical-align:middle">CGST</th>
                                            <th nowrap colspan="2" class="text-center" style="vertical-align:middle">SGST</th>
                                            <th nowrap colspan="2" class="text-center" style="vertical-align:middle">IGST</th>
                                            <th nowrap rowspan="2" class="text-center" style="vertical-align:middle">Delete</th>
                                        </tr>
                                        <tr>
                                            <th>Rate</th>
                                            <th>Amt</th>
                                            <th>Rate</th>
                                            <th>Amt</th>
                                            <th>Rate</th>
                                            <th>Amt</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr *ngFor="let obj of productaddSubmit ; let ind = index; let odd = odd;" [class.even]="odd">
                                            <td>{{ ind + 1 }}</td>
                                            <td>{{obj.Product_Details}}</td>
                                            <td>{{obj.HSN_Code}}</td>
                                            <td>{{obj.Unit}}</td>
                                            <td>{{obj.Challan}}</td>
                                            <td>{{obj.Received}}</td>
                                            <td>{{obj.Rejected}}</td>
                                            <td>{{obj.Accepted}}</td>
                                            <td>{{obj.Rate}}</td>
                                            <td>{{obj.Taxable_Value}}</td>
                                            <td>{{obj.GST_Tax_Per}}</td>
                                            <td>{{obj.Tax}}</td>
                                            <td>{{obj.Total_Amount}}</td>
                                            <td><input type="text" [name]="obj.Product_ID" [(ngModel)]='obj.Remarks' class="form-control" style="width: 200px;" /></td> 
                                            <td *ngIf="!obj?.deleteflag"><button (click)="delete(ind)" class="btn danger"><i class="fa fa-trash"></i></button></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div> 

                            <div class="form-group">
                                <div class="col-xs-6">
                                    <div class="table-responsive">
                                        <table class="table">
                                            <tbody><tr>
                                                <th style="width:30%">Total Amount:</th>
                                                <td class="ng-binding"></td>
                                            </tr>
                                            <tr>
                                                <th>Discount Amount:</th>
                                                <td class="ng-binding"></td>
                                            </tr>
                                            <tr>
                                                <th>Taxable Amount:</th>
                                                <td class="ng-binding"></td>
                                            </tr>
                                            <tr>
                                                <th>Term Amount:</th>
                                                <td class="ng-binding"></td>
                                            </tr>
                                            <tr>
                                                <th>CGST Amount:</th>
                                                <td class="ng-binding"></td>
                                            </tr>
                                            <tr>
                                                <th>SGST Amount:</th>
                                                <td class="ng-binding"></td>
                                            </tr>
                                            <tr>
                                                <th>IGST Amount:</th>
                                                <td class="ng-binding"></td>
                                            </tr>
                                            <tr>
                                                <th>Gross Amount: </th>
                                                <td class="ng-binding"></td>
                                            </tr>
                                            <tr>
                                                <th>Rounded Off:</th>
                                                <td class="ng-binding"></td>
                                            </tr>
                                            <tr>
                                                <th>Net Amount: </th>
                                                <td class="ng-binding"></td>
                                            </tr>
                                        </tbody></table>
                                    </div>
                                </div>
                            </div>

                            <div class="box-footer">
                                <button class="btn btn-primary pull-right" (click)="SaveGRN()" id="load" [disabled]="Spinner">
                           <p-progressSpinner *ngIf="Spinner" [style]="{width: '15px', height: '15px'}" strokeWidth="8"  animationDuration=".5s"></p-progressSpinner>
                       <span *ngIf="!Spinner" class="glyphicon glyphicon-save"></span>{{buttonname}}
                   </button>
                            </div>
                        </p-tabPanel>
                    </p-tabView>
                </div>
            </div>
        </div>
    </div>
</div> -->


<p-toast key="compacct-toast" baseZIndex="99999"></p-toast>
<p-toast position="center" key="c" (onClose)="onReject()" [modal]="true" [autoZIndex]="true">
    <ng-template let-message pTemplate="message">
        <div style="text-align: center">
            <i class="pi pi-exclamation-triangle" style="font-size: 3em"></i>
            <h3>{{message.summary}}</h3>
            <p>{{message.detail}}</p>
        </div>

        <div class="ui-g ui-fluid">
          <div class="ui-g-6">
              <button type="button" pButton (click)="onConfirm()" label="Yes" class="ui-button-success"></button>
          </div>
          <div class="ui-g-6">
              <button type="button" pButton (click)="onRejects()" label="No" class="ui-button-secondary"></button>
          </div>
      </div>

    </ng-template>
</p-toast>
                    <div class="row">
                        <div class="col-xs-12">
                            <div class="box box-primary">
                                <div class="form-horizontal">
                                    <div class="box-body">

                    <div class="form_group">
                        <div class="col-sm-3">
                            <input class="form-control" type="month" name="month" [(ngModel)]="Month_Name" (change)="getAttendanceData()">
                        </div>
                        <div class="col-sm-2">
                            <button  class="btn btn-primary pull-right1" (click)="getAttendanceDatafornewmonth()" >Generate Attendance</button>
                        </div> 
                        <div class="col-sm-2">
                            <button  class="btn btn-warning"  >Process Monthly Attendance Sheet</button>
                        </div>
                    </div>
                    <br>
                    <br>
                    
<div class="col-lg-12">
    <div class="panel-group">
        <div class="panel panel-primary">
            <div class="panel-body">
                    <!-- <div class="clearfix"></div> -->
                    <div class="no-padding" >
                    <p-table [value]="AllAttendanceData"
                            [rowHover]="true" 
                            [autoLayout]="true" 
                            [responsive]="true"
                            [scrollable]="true"
                            scrollHeight="500px"
                            sortMode="multiple"
                            [columns]="cols" >
                            <ng-template pTemplate="colgroup" let-columns>
                                <colgroup>
                                     <col *ngFor="let col of DynamicHeader |  slice:1" [class]="col === 'Emp_Name' ? 'tablelarge' : 'tablesmall'"><!-- [class]="col.Emp_Name ? 'tablelarge' : 'tablesmall'" -->
                                </colgroup>
                            </ng-template>
                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th nowrap="nowrap" style="background-color:rgb(90 96 109) !important ; color:white"
                                            (click)="ChangeAllRow(option)" *ngFor="let option of DynamicHeader | slice:1">{{option.replaceAll('_',' ')}}</th> 
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="body" let-col>
                                        <tr >
                                            <!-- <ng-container *ngFor="let option of DynamicHeader ; let i = index"> -->
                                                <!-- <td nowrap="nowrap">{{col[option]}}</td> -->
                                                <td nowrap="nowrap" *ngFor="let option of DynamicHeader | slice:1; let i = index" 
                                                (click)="tableCellData(option,col)" (contextmenu)="onrightclick(option,col)" [class]="getcellText(col[option],option)">{{getcellText(col[option],option)}} </td>
                                            <!-- </ng-container> -->
                                            
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="paginatorright" let-state>
                                        Showing {{state.first+1}} of {{(state.first+1) + state.rows}} of {{state.totalRecords}}
                                    </ng-template>
                                </p-table>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-sm-8">
        <h5><strong></strong></h5>
    </div>
</div>
<div class="box-footer">
    <button class="btn btn-primary pull-right" (click)="saveAttendance()" id="load" [disabled]="Spinner">
        <p-progressSpinner *ngIf="Spinner" [style]="{width: '15px', height: '15px'}" strokeWidth="8"  animationDuration=".5s"></p-progressSpinner>
        <span *ngIf="!Spinner" class="glyphicon glyphicon-save"></span>{{buttonname}}
        </button>
</div>
</div>
</div>
</div>
</div>
</div>



<!-- FOR ONE EMPLOYEE (ONE CELL) -->
<p-dialog header="Update Attendance" [appendTo]="'body'" [(visible)]="display" [modal]="true" [responsive]="true" [minY]="70" [closeOnEscape]="true" [style]="{ width: '35%', minWidth: '350px' }">
    <form name="attendancestatusForm" #attendancestatusForm="ngForm" novalidate>
        <div class="col-sm-12">
            <label>Employee Name:</label>&nbsp; {{employeename}}
        </div>
        <div class="col-sm-12">
            <label>Date:</label>&nbsp; {{Doc_date}}

        </div>
        <div class="col-sm-12">
            <label>Attendance Type <sup class="text-danger">*</sup></label>&nbsp;
            <select name="atten" #atten="ngModel" [(ngModel)]="Attendance_Status" [ngClass]="{'clearance': attendancestatusFormSubmitted && atten?.errors?.required}">
           <option  [ngValue]="undefined">Select</option>
           <option *ngFor = "let option of AttenTypelist" value="{{option.Atten_Type_ID}}">
             {{option.Atten_Type}}
            </option>
           </select>
        </div>
        <hr>
        <p-footer>
            <div class="text-right">
                <button type="button" (click)="display = false" class="btn btn-default"><i class="fa fa-time"></i>&nbsp; Close</button>&nbsp;
                <button type="button" (click)="SaveAttendanceType()" class="btn btn-success">
           <i class="fa fa-check"></i>&nbsp;  Done
         </button>
            </div>
        </p-footer>
    </form>
</p-dialog>

<!-- FOR ALL EMPLOYEE (ONE COLUMN)-->
<p-dialog header={{DayName}} [appendTo]="'body'" [(visible)]="displayALLEmployee" [modal]="true" [responsive]="true" [minY]="70" [closeOnEscape]="true" [style]="{ width: '30%', minWidth: '300px' }">
    <div class="col-sm-12">
        <label>Date:</label>&nbsp; {{Doc_date_AllEmp}}

    </div>
    <div class="col-sm-12">
        <label>Attendance Type <sup class="text-danger">*</sup></label>&nbsp;
        <select name="atten" #atten="ngModel" [(ngModel)]="Attendance_Status_ALlEmployee" [ngClass]="{'clearance': attendancestatusFormSubmitted && atten?.errors?.required}">
           <option  [ngValue]="undefined">Select</option>
           <option *ngFor = "let option of AttenTypelist" value="{{option.Atten_Type_ID}}">
             {{option.Atten_Type}}
            </option>
           </select>
    </div>
    <hr>
    <p-footer>
        <div class="text-right">
            <button type="button" (click)="displayALLEmployee = false" class="btn btn-default"><i class="fa fa-time"></i>&nbsp; Close</button>&nbsp;
            <button type="button" (click)="SaveForALLEmployee()" class="btn btn-success">
           <i class="fa fa-check"></i>&nbsp;  Done
         </button>
        </div>
    </p-footer>
</p-dialog>