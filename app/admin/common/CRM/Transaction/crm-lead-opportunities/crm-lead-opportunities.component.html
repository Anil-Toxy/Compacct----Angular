<p-toast key="compacct-toast" baseZIndex="99999"></p-toast>

 <div class="row">
    <div class="col-xs-12">
        <div class="box box-primary">
            <div class="form-horizontal">
                <div class="box-body">
                    <p-tabView [activeIndex]="tabIndexToView" (onChange)="TabClick($event)">
                        <p-tabPanel headerStyleClass="compacct-tabs" [header]="items[0]" leftIcon="glyphicon glyphicon-list-alt" >
                         
                            <div class="table-responsive table-id">
                            <p-table #dt
                                     [value]='LeadList'
                                     [globalFilterFields]="['Mobile','Mobile_Whatsup','Contact_Name','Class_Name','Pin','City','Address','School']"
                                     [paginator]="true" [rows]="10" [rowHover]="true"
                                     [autoLayout]="true" sortMode="multiple"
                                     [rowsPerPageOptions]="[10,20,30]"
                                     [rowHover]="true">
                                       <ng-template pTemplate="caption">
                                           <div class="row">
                                                <div class="col-sm-3 pull-right" style="text-align: right">
                                                        <input type="text" pInputText size="50" placeholder="Search" (input)="dt.filterGlobal($event.target.value, 'contains')" class="searchInput form-control">
                                                    </div>
                                           </div>

                                        </ng-template>

                                        <ng-template pTemplate="header">
                                            <tr>
                                                <th>Action</th>
                                                <th>Company Name</th>
                                                <th>Contact Person</th>
                                                <th>Phone</th>
                                                <th>Email</th>
                                                <th>Mobile</th>
                                                <th>Address</th>
                                                <th>Sales Stage</th>
                                                <th>Source</th>
                                                <th>Assigned To</th>

                                            </tr>
                                        </ng-template>
                                        <ng-template pTemplate="body" let-col>
                                            <tr>
                                                <td>
                                                    <div class="dropdown">
                                                        <button class="btn btn-default btn-sm tableButton dropdown-toggle" type="button" data-toggle="dropdown" style="height:27px">
                                                            <i class="fa fa-fw fa-bars"></i>
                                                            <span class="caret"></span>
                                                        </button>
                                                        <ul class="dropdown-menu">
                                                            <li>
                                                                <a (click)="RedirectLeadDetails(col)"> <i class="fa fa-pencil"> </i>Edit</a>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                </td>
                                                <td>{{col.Org_Name}}</td>
                                                <td>{{col.Contact_Name}}</td>
                                                <td>{{col.Mobile ? col.Mobile : '-' }}</td>
                                                <td>{{col.Email ? col.Email : '-'}}</td>
                                                <td>{{col.Phone ? col.Phone : '-'}}</td>
                                                <td>{{col.Address ? col.Address : '-'}}</td>

                                                <td><span class="custm-bad" [ngClass]='GetStatusWiseColor(col.Status)'>{{col.Status ? col.Status : '-'}}</span></td>
                                                <td>{{col.Enq_Source_Name ? col.Enq_Source_Name : '-'}}</td>
                                                <td>{{col.Assign_To_Name ? col.Assign_To_Name : '-'}}</td>
                                            </tr>
                                        </ng-template>

                                    <ng-template pTemplate="paginatorright" let-state>
                                            Showing {{state.first+1}} of {{(state.first+1) + state.rows}} of  {{state.totalRecords}}
                                    </ng-template>
                            </p-table>
                            </div> 
                        </p-tabPanel>
                        <p-tabPanel headerStyleClass="compacct-tabs" [header]="items[1]" leftIcon="glyphicon glyphicon-floppy-save">
                            <div *ngIf="BackupLeadList.length" class="form-group" style="padding:15px">
                                <fieldset class="col-md-12">
                                    <legend>Filter</legend>
    
                                    <div class="form-group">
                                        <div class="col-sm-3">
                                            <label class="control-label">Lead <span class="text-danger"></span></label>
                                            <p-multiSelect [options]="LeadFilterList" (onChange)='GlobalFilterChange()' [(ngModel)]="SelectedLeadFilterList" [styleClass]="'compacct-multiselect'" name="PinList"></p-multiSelect>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>   
                            <div style="overflow: scroll;width: 100%;height: 500px;display: flex;" >
                                   <div class='status-contain' *ngFor='let status of StatusList'>
                                    <p-dataView #dv [value]="getStatusWIseList(status)" [paginator]="true" [rows]="20" paginatorPosition="both" filterBy="brand"
                                    [sortField]="sortField" [sortOrder]="sortOrder">
                                    <p-header>
                                        <div class="ui-helper-clearfix">
                                            <div class="ui-g">
                                                <div class="ui-g-12 ui-md-6" [ngClass]='GetStatusWiseColor(status.Status)' style="text-align: center;line-height: 2em;border-radius: 5px;">
                                                    {{status.Status}}
                                                </div>
                                                <div class="ui-g-12 ui-md-6" style="text-align:right">
                                                    <p-dataViewLayoutOptions></p-dataViewLayoutOptions>
                                                </div>
                                            </div>
                                            <div class="ui-g">
                                                <div class="ui-g-12 ui-md-6">
                                                    <p-dropdown [options]="sortOptions" [(ngModel)]="sortKey" placeholder="Sort By" (onChange)="onSortChange($event)" [style]="{'min-width':'140px'}"></p-dropdown>
                                                </div>
                                                <div class="ui-g-12 ui-md-6 filter-container">
                                                    <div style="position:relative">
                                                        <input type="search" class="form-control" placeholder="Search by brand" (keyup)="dv.filter($event.target.value)">
                                                    </div>
                                                </div>
                                               
                                            </div>
                                        </div>
                                    </p-header>
                                    <ng-template let-lead pTemplate="listItem">
                                        <div class="ui-g-12">
                                            <div class="car-details" style="border-bottom: 1px dotted #00000036;">
                                                <div>
                                                   
                                                    <div class="ui-g">
                                                        <div class="ui-g-12">Company Name : <b>{{lead.Org_Name}}</b></div>
                                                        <div class="ui-g-12">Contact Person : <b>{{lead.Contact_Name}}</b></div>
                                                        <div class="ui-g-12">Phone : <b>{{lead.Mobile}}</b></div>
                                                        <div class="ui-g-12">Lead Created By : <b>{{lead.Lead_Created_By}}</b></div>
                                                        <div class="ui-g-12">Last Followup Date : <b>{{lead.Lead_Date | date : "dd/MMM/yyyy hh:mm a"}}</b></div>
                                                        <div class="ui-g-12">Next Followup Date : <b>{{lead.Next_Followup}}</b></div>
                                                        <div class="ui-g-12">
                                                            <button class="btn pull-right btn-warning btn-xs"  (click)="RedirectLeadDetails(lead)"><i class="glyphicon glyphicon-info-sign"></i>&nbsp;More...</button>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                            </div>
                                        </div>
                                    </ng-template>
                                    <ng-template let-lead pTemplate="gridItem">
                                        <div style="padding:.5em" class="ui-g-12 ui-md-3">
                                            <p-panel [header]="lead.Org_Name" [style]="{'text-align':'center'}">
                                                
                                                <div class="car-detail">{{lead.Contact_Name}} - {{lead.Mobile}}</div>
                                                <hr class="ui-widget-content" style="border-top:0">
                                                <button style="margin-top:0" class="btn pull-right btn-xs"  (click)="RedirectLeadDetails(lead)"><i class="glyphicon glyphicon-info-sign"></i>&nbsp;More...</button>
                                                
                                            </p-panel>
                                        </div>
                                    </ng-template>
                                </p-dataView>
                                   </div>
                               </div>
                        </p-tabPanel>
                    </p-tabView>
              </div>
            </div>
        </div>
    </div>
</div>


