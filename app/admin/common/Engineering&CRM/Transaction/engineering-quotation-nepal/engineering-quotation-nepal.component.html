<p-toast key="compacct-toast" baseZIndex="99999">
</p-toast>


<div class="row">
    <div class="col-xs-12">
        <div class="box box-primary">
            <div class="form-horizontal">
                <div class="box-body">
                    <p-tabView [activeIndex]="tabIndexToView" (onChange)="TabClick($event)">
                        <p-tabPanel headerStyleClass="compacct-tabs" [header]="items[0]" leftIcon="glyphicon glyphicon-list-alt">
                            <form name="SearchForm" #SearchForm="ngForm" novalidate>
                                <div class="form-group">
                                    <div class="col-lg-6">
                                        <div class="panel-group">
                                            <div class="panel panel-primary">
                                                <div class="panel-body">
                                                    <div class="form-group">
                                                    <div class="col-sm-12">
                                                        <label class="control-label">Quotation From&nbsp;<span class="text-danger">*</span></label> &nbsp;&nbsp;
                                                         <input type="radio" name="browsequotfrom" value="CustomerBrowse" [(ngModel)]="ObjBrowseQuotation.Quotation_From" (change)="radiobrowsechange()">
                                                         <label style="font-weight: 400;">Customer</label>&nbsp;&nbsp;
                                                         <input type="radio" name="browsequotfrom" value="LeadBrowse" [(ngModel)]="ObjBrowseQuotation.Quotation_From" (change)="radiobrowsechange()">
                                                         <label style="font-weight: 400;">Lead</label>                                                  
                                                    </div>
                                                    </div>
                                                    <div class="form-group">
                                                    <div class="col-sm-12" *ngIf="ObjBrowseQuotation.Quotation_From === 'CustomerBrowse'">
                                                        <label class="control-label">Customer&nbsp;<span class="text-danger">*</span></label>
                                                        <!-- <div class="col-sm-4">
                                                            <label class="control-label">Customer&nbsp;<span class="text-danger">*</span></label> -->
                                                            <p-dropdown [options]="CustomerBrowseList" name="BrowseCustomer" [(ngModel)]="ObjBrowseQuotation.Sub_Ledger_ID" [showClear]="true" [emptyFilterMessage]="' No Customer Found'" [filter]="true" filterBy="label,value.name" [resetFilterOnHide]="true"
                                                                [placeholder]="'Select Customer'" [virtualScroll]="true" itemSize="30" #BrowseCustomer="ngModel" [styleClass]="SearchFormSubmitted &&  BrowseCustomer.errors?.required ? 'clearance' :''" [required]="ObjBrowseQuotation.Quotation_From === 'Customer' ? true : false">
                                                            </p-dropdown>
                                                        </div>
                                                        <!-- <p-dropdown [options]="CustomerList" name="Customer" [(ngModel)]="ObjEnginnerQuoation.Sub_Ledger_ID" [showClear]="true" [emptyFilterMessage]="' No Customer Found'" (onChange)="GetLocation()" [filter]="true" filterBy="label,value.name" [resetFilterOnHide]="true"
                                                            [placeholder]="'Select Customer'" [virtualScroll]="true" itemSize="30" #Customer="ngModel" [disabled]="EngQuoationProductList.length" [styleClass]="EnginnerQuoationMachineFormSubmitted &&  Customer.errors?.required ? 'clearance' :''"
                                                            [required]="ObjEnginnerQuoation.Quotation_From === 'Customer' ? true : false">
                                                        </p-dropdown> -->
                                                    <div class="col-sm-12" *ngIf="ObjBrowseQuotation.Quotation_From === 'LeadBrowse'">
                                                        <label class="control-label">Lead&nbsp;<span class="text-danger">*</span></label>
                                                        <p-dropdown [options]="LeadBrowseList" name="Browselead" [(ngModel)]="ObjBrowseQuotation.Foot_Fall_ID" [showClear]="true" [emptyFilterMessage]="' No Customer Found'" [filter]="true" filterBy="label,value.name" [resetFilterOnHide]="true"
                                                            [placeholder]="'Select Lead'" [virtualScroll]="true" itemSize="30" #Browselead="ngModel"  [styleClass]="SearchFormSubmitted &&  Browselead.errors?.required ? 'clearance' :''"
                                                            [required]="ObjBrowseQuotation.Quotation_From === 'Lead' ? true : false">
                                                        </p-dropdown>
                                                    </div>
                                                    </div>
                                                    </div>
                                                   </div>
                                                 </div>
                                                 </div>
                                    <!-- <div class="col-sm-3">
                                        <label class="control-label">From Date <sup class="text-danger">*</sup></label>
                                        <div class="input-group date">
                                            <div class="input-group-addon">
                                                <i class="fa fa-calendar"></i>
                                            </div>
                                            <input CompacctNepaliDatepicker id="BSdate" name="BSdate" Class="form-control" (ngModelChange)="BrowseStartDate= $event" [(ngModel)]="BrowseStartDate" />
                                        </div>
                                    </div>
                                    <div class="col-sm-3">
                                        <label class="control-label">To Date <sup class="text-danger">*</sup></label>
                                        <div class="input-group date">
                                            <div class="input-group-addon">
                                                <i class="fa fa-calendar"></i>
                                            </div>
                                            <input CompacctNepaliDatepicker id="BEdate" name="BEdate" Class="form-control" (ngModelChange)="BrowseEndDate= $event" [(ngModel)]="BrowseEndDate" />
                                        </div>
                                    </div> -->
                                    <!-- <div class="col-sm-4">
                                        <label class="control-label">Customer&nbsp;<span class="text-danger">*</span></label>
                                        <p-dropdown [options]="CustomerList" name="BrowseCustomer" [(ngModel)]="Browse_Sub_Ledger_ID" [showClear]="true" [emptyFilterMessage]="' No Customer Found'" (onChange)="GetLocation()" [filter]="true" filterBy="label,value.name" [resetFilterOnHide]="true"
                                            [placeholder]="'Select Customer'" [virtualScroll]="true" itemSize="30" #Customer="ngModel" [styleClass]="SearchFormSubmitted &&  Customer.errors?.required ? 'clearance' :''">
                                        </p-dropdown>
                                    </div> -->

                                    <div class="col-sm-2">
                                        <button class="btn btn-primary custombutton" data-toggle="modal" (click)="GetSearchedList(SearchForm.form.valid)" id="load" [disabled]="seachSpinner">
                        <p-progressSpinner
                          *ngIf="seachSpinner"
                          [style]="{ width: '15px', height: '15px' }"
                          strokeWidth="8"
                          animationDuration=".5s"
                        ></p-progressSpinner>
                        <span
                          *ngIf="!seachSpinner"
                          class="glyphicon glyphicon-search"
                        ></span
                        >&nbsp;Search
                      </button>
                                    </div>
                                </div>

                            </form>
                            <div class="row">
                                <div class="col-sm-8">
                                    <h5><strong></strong></h5>
                                </div>
                            </div>
                            <div class="table-responsive table-id">
                                <p-table #dt [value]="BrowseList" [globalFilterFields]="['Location_Name','Mfg_Company','Machine','Serial_No','Service_Type','Service_Start_Date','Service_End_Date','Payment_Status','Payment_Date']" [paginator]="BrowseList.length ? true:false" [rows]="10"
                                    [rowHover]="true" [autoLayout]="true" sortMode="multiple" [rowsPerPageOptions]="[100,300,500]" [rowHover]="true">
                                    <ng-template pTemplate="caption">
                                        <div class="row">
                                            <div class="col-sm-3 pull-right" style="text-align: right;">
                                                <input type="text" pInputText size="50" placeholder="Search" (input)="dt.filterGlobal($event.target.value, 'contains')" class="searchInput form-control">
                                            </div>
                                        </div>

                                    </ng-template>
                                    <ng-template pTemplate="header">
                                        <tr>
                                            <th style="width:5em">Action</th>
                                            <th>Customer Name</th>
                                            <th>Quotation Type</th>
                                            <th>Quotation To Company</th>
                                            <th>Total Taxable Amount</th>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="body" let-col>
                                        <tr>

                                            <td>
                                                <div class="dropdown">
                                                    <button class="btn btn-default btn-sm tableButton dropdown-toggle" type="button" data-toggle="dropdown" style="height:27px">
                                                                                <i class="fa fa-fw fa-bars"></i>
                                                                                <span class="caret"></span>
                                                                            </button>
                                                    <ul class="dropdown-menu">
                                                        <li>
                                                            <a (click)="Edit(col)">
                                                                <i class="fa fa-fw fa-pencil"></i> Edit
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </td>
                                            <td>{{col.Sub_Ledger_Name}}</td>
                                            <td>{{col.Quotation_Type}}</td>
                                            <td>{{col.Quotation_To_Company}}</td>
                                            <td>{{col.Total_Taxable_Amount}}</td>
                                        </tr>
                                    </ng-template>
                                    <ng-template pTemplate="paginatorright" let-state>
                                        Showing {{state.first+1}} of {{(state.first+1) + state.rows}} of {{state.totalRecords}}
                                    </ng-template>
                                </p-table>
                            </div>
                        </p-tabPanel>
                        <p-tabPanel headerStyleClass="compacct-tabs" [header]="items[1]" leftIcon="glyphicon glyphicon-floppy-save">
                            <!-- <form name="EnginnerQuoationForm" #EnginnerQuoationForm="ngForm" novalidate> -->
                            <form name="EnginnerQuoationMachineForm" #EnginnerQuoationMachineForm="ngForm" novalidate>
                                <div class="form-group">
                                <div class="col-lg-6">
                                    <div class="panel-group">
                                        <div class="panel panel-primary">
                                            <div class="panel-body">
                                                <div class="form-group">
                                                <div class="col-sm-12">
                                                    <label class="control-label">Quotation From&nbsp;</label> &nbsp;&nbsp;
                                                     <input type="radio" name="quotfrom" value="Customer" [(ngModel)]="ObjEnginnerQuoation.Quotation_From" [disabled]="EngQuoationProductList.length" (change)="radiochange()">
                                                     <label style="font-weight: 400;">Customer</label>&nbsp;&nbsp;
                                                     <input type="radio" name="quotfrom" value="Lead" [(ngModel)]="ObjEnginnerQuoation.Quotation_From" [disabled]="EngQuoationProductList.length" (change)="radiochange()">
                                                     <label style="font-weight: 400;">Lead</label>                                                  
                                                </div>
                                                </div>
                                                <div class="form-group">
                                                <div class="col-sm-12" *ngIf="ObjEnginnerQuoation.Quotation_From === 'Customer'">
                                                    <label class="control-label">Customer&nbsp;</label>
                                                    <!-- <span (click)="CreateCustomer()" class="btn-vk  pull-right createPatient"><i class="fa fa-fw  fa-plus"></i> Create</span> -->
                                                    <p-dropdown [options]="CustomerList" name="Customer" [(ngModel)]="ObjEnginnerQuoation.Sub_Ledger_ID" [showClear]="true" [emptyFilterMessage]="' No Customer Found'" (onChange)="GetLocation()" [filter]="true" filterBy="label,value.name" [resetFilterOnHide]="true"
                                                        [placeholder]="'Select Customer'" [virtualScroll]="true" itemSize="30" #Customer="ngModel" [disabled]="EngQuoationProductList.length" [styleClass]="EnginnerQuoationMachineFormSubmitted &&  Customer.errors?.required ? 'clearance' :''"
                                                        [required]="ObjEnginnerQuoation.Quotation_From === 'Customer' ? true : false">
                                                    </p-dropdown>
                                                </div>
                                                <div class="col-sm-12" *ngIf="ObjEnginnerQuoation.Quotation_From === 'Lead'">
                                                    <label class="control-label">Lead&nbsp;</label>
                                                    <span (click)="CreateCustomer()" class="btn-vk  pull-right createPatient"><i class="fa fa-fw  fa-plus"></i> Create</span>
                                                    <p-dropdown [options]="LeadList" name="lead" [(ngModel)]="ObjEnginnerQuoation.Foot_Fall_ID" [showClear]="true" [emptyFilterMessage]="' No Customer Found'" (onChange)="GetLocation()" [filter]="true" filterBy="label,value.name" [resetFilterOnHide]="true"
                                                        [placeholder]="'Select Lead'" [virtualScroll]="true" itemSize="30" #Customer="ngModel" [disabled]="EngQuoationProductList.length" [styleClass]="EnginnerQuoationMachineFormSubmitted &&  Customer.errors?.required ? 'clearance' :''"
                                                        [required]="ObjEnginnerQuoation.Quotation_From === 'Lead' ? true : false">
                                                    </p-dropdown>
                                                </div>
                                                </div>
                                                </div>
                                               </div>
                                             </div>
                                           </div>
                                    <!-- <div class="col-sm-2">
                                        <label class="control-label">Quoation Date <sup class="text-danger">*</sup></label>
                                        <div class="input-group date">
                                            <div class="input-group-addon">
                                                <i class="fa fa-calendar"></i>
                                            </div>

                                            <input CompacctNepaliDatepicker id="Quoation" name="Quoation" Class="form-control" (ngModelChange)="QuoationDate= $event" [disabled]="EngQuoationProductList.length" [(ngModel)]="QuoationDate" /> -->
                                    <!-- <np-datepicker language="en"  id='Quoation' 
                                            [disabled]="EngQuoationProductList.length"
                                            name="Quoation" inputClass="form-control" [(ngModel)]="QuoationDate"></np-datepicker> -->
                                    <!-- </div>
                                    </div> -->
                                    <div class="col-sm-3">
                                        <label class="control-label">Quotation Type<sup class="text-danger">*</sup></label>
                                        <select class="form-control" name="quotype" #quotype="ngModel" [disabled]="EngQuoationProductList.length" [(ngModel)]="ObjEnginnerQuoation.Quotation_Type" [ngClass]="{'clearance': EnginnerQuoationMachineFormSubmitted && quotype.errors?.required}" required>
                                                              <option  [ngValue]="undefined">Select</option>
                                                              <option  value="Machine">Machine</option>
                                                              <option  value="Spare">Spare</option>
                                                              <option  value="AMC">AMC</option>
                                                              <option  value="Adhoc Type of quotation"> Adhoc Type of quotation</option>
                                                      </select>
                                    </div>
                                    <div class="col-sm-3">
                                        <label class="control-label">Quotation To Company<sup class="text-danger">*</sup></label>
                                        <select class="form-control" name="quotocmpny" #quotocmpny="ngModel" [disabled]="EngQuoationProductList.length" [(ngModel)]="ObjEnginnerQuoation.Quotation_To_Company" [ngClass]="{'clearance': EnginnerQuoationMachineFormSubmitted && quotocmpny.errors?.required}" required>
                                                              <option  [ngValue]="undefined">Select</option>
                                                              <option  value="Trishul Trade Links">Trishul Trade Links</option>
                                                              <option  value="S.G. Nepal Pvt. Ltd.">S.G. Nepal Pvt. Ltd.</option>
                                                              <option  value="TTL EXIM Pvt. Ltd.">TTL EXIM Pvt. Ltd. </option>
                                                              <option  value="SAURABH INTERNATIONAL CONCERN">SAURABH INTERNATIONAL CONCERN</option>
                                                      </select>
                                    </div>
                                </div>
                                <!-- </form> -->
                                <hr class="box boxboxDivide-primary">
                                <!-- <form name="EnginnerQuoationMachineForm" #EnginnerQuoationMachineForm="ngForm" novalidate> -->
                                <div class="form-group">
                                    <div class="col-sm-4">
                                        <label class="control-label">Location<sup class="text-danger">*</sup></label>
                                        <select class="form-control" name="location" #location="ngModel" [(ngModel)]="ObjEnginnerQuoation.Location_ID" [disabled]="ObjEnginnerQuoation.Quotation_From === 'Lead'" [ngClass]="{'clearance': EnginnerQuoationMachineFormSubmitted && location.errors?.required}" required>
                                                              <option  [ngValue]="undefined">Select</option>
                                                          <option *ngFor="let option of LoctionList" [ngValue]="option.Location_ID">
                                                              {{option.Location_Name}}
                                                              </option>
                                                      </select>
                                    </div>
                                    <div class="col-sm-4">
                                        <label class="control-label">Manufacture&nbsp;<span class="text-danger">*</span></label>
                                        <p-dropdown [options]="ManufactureList" name="Manufacture" [(ngModel)]="ObjEnginnerQuoation.Product_Mfg_Comp_ID" [showClear]="true" [emptyFilterMessage]="' No Manufacture Found'" (onChange)="GetInstallMachine()" [filter]="true" filterBy="label,value.name"
                                            [resetFilterOnHide]="true" [placeholder]="'Select Manufacture'" [virtualScroll]="true" itemSize="30" #Manufacture="ngModel" [styleClass]="EnginnerQuoationMachineFormSubmitted &&  Manufacture.errors?.required ? 'clearance' :''"
                                            [required]="true">
                                        </p-dropdown>
                                    </div>
                                    <div class="col-sm-4">
                                        <label class="control-label">Machine&nbsp;<span class="text-danger">*</span></label>
                                        <p-dropdown [options]="InstallMachineList" name="Installed" [(ngModel)]="ObjEnginnerQuoation.Product_ID" [showClear]="true" [emptyFilterMessage]="' No Installed Machine Found'" (onChange)="ProductChange()" [filter]="true" filterBy="label,value.name" [resetFilterOnHide]="true"
                                            [placeholder]="'Select Installed Machine'" [virtualScroll]="true" itemSize="30" #Installed="ngModel" [styleClass]="EnginnerQuoationMachineFormSubmitted &&  Installed.errors?.required ? 'clearance' :''" [required]="true">
                                        </p-dropdown>
                                    </div>
                                    <div class="col-sm-4" style="margin-top: -2px;">
                                        <label class="control-label">Spare Parts&nbsp;<span class="text-danger">*</span></label>
                                        <p-dropdown [options]="SparePartsList" name="Spare" [(ngModel)]="ObjEnginnerQuoation.Spare_Parts_Product_ID" [disabled]="ObjEnginnerQuoation.Quotation_Type != 'Spare'" [showClear]="true" (onChange)="SparePartChange()" [emptyFilterMessage]="'No Spare Parts Found'" [filter]="true" filterBy="label,value.name" [resetFilterOnHide]="true"
                                            [placeholder]="'Select Spare Parts'" [virtualScroll]="true" itemSize="30" #Spare="ngModel" [styleClass]="EnginnerQuoationMachineFormSubmitted &&  Spare.errors?.required ? 'clearance' :''" [required]="ObjEnginnerQuoation.Quotation_Type != 'Spare'">
                                        </p-dropdown>
                                    </div>
                                    <div class="col-sm-2">
                                        <label class="control-label">Quantity<sup class="text-danger">*</sup></label>
                                        <input class="form-control" name="qty" #qty="ngModel" [(ngModel)]="ObjEnginnerQuoation.Qty" (change)="CalculateAmount()" [ngClass]="{'clearance': EnginnerQuoationMachineFormSubmitted && qty?.errors?.required }" [required]="true" CompacctDigitonly="true"
                                            placeholder="Quantity" />
                                    </div>
                                    <div class="col-sm-2">
                                        <label class="control-label">Rate<sup class="text-danger">*</sup></label>
                                        <input class="form-control" name="rate" type="text" [ngClass]="{'clearance': EnginnerQuoationMachineFormSubmitted &&  rate?.errors?.required }" #rate="ngModel" [(ngModel)]="ObjEnginnerQuoation.Rate" (change)="CalculateAmount()" CompacctDigitonly="true"
                                            [required]="true" placeholder="Rate" />
                                    </div>
                                    <div class="col-sm-2">
                                        <label class="control-label">Total Amount<sup class="text-danger">*</sup></label>
                                        <input class="form-control" name="tolamt" #tolamt="ngModel" [(ngModel)]="ObjEnginnerQuoation.Total_Amount" [disabled]="true" placeholder="Total Amount" />
                                    </div>
                                    <div class="col-sm-2">
                                        <label class="control-label">Discount Type<sup class="text-danger"></sup></label>
                                        <select name="distype" #distype="ngModel" [(ngModel)]="ObjEnginnerQuoation.Discount_Type" class="form-control" (change)="DiscountTypeClean()">
                                            <option  [ngValue]="undefined">Select</option>
                                            <option value="%"> %</option>
                                            <option value="AMT"> AMT</option>
                                        </select>
                                    </div>
                                    <div class="col-sm-2">
                                        <label class="control-label">Discount<sup class="text-danger"></sup></label>
                                        <input class="form-control" name="Discount" #Discount="ngModel" [(ngModel)]="ObjEnginnerQuoation.Discount" (change)="DiscountTypeChange()" CompacctDigitonly="true" placeholder="Discount" />
                                    </div>
                                    <div class="col-sm-2">
                                        <label class="control-label">Discount Amount<sup class="text-danger"></sup></label>
                                        <input class="form-control" name="DisAmt" #DisAmt="ngModel" [(ngModel)]="ObjEnginnerQuoation.Discount_Amount" [disabled]="true" placeholder="Discount Amount" />
                                    </div>
                                    <div class="col-sm-3">
                                        <label class="control-label">VAT %<sup class="text-danger"></sup></label>
                                        <div class="input-group">
                                            <input class="form-control" name="VAT" #VAT="ngModel" [(ngModel)]="ObjEnginnerQuoation.VAT" (change)="CalculateTax()" placeholder="VAT %" CompacctDigitonly="true" />
                                            <div class="input-group-addon">
                                                %
                                            </div>
                                        </div>

                                    </div>
                                    <div class="col-sm-2">
                                        <label class="control-label">Taxable Amount<sup class="text-danger"></sup></label>
                                        <input class="form-control" name="TaxableAmt" #TaxableAmt="ngModel" [(ngModel)]="ObjEnginnerQuoation.Net_Amt" [disabled]="true" placeholder="Taxable Amount" />
                                    </div>
                                    <div class="col-sm-3">
                                        <button type="submit" name='stock' class="btn btn-primary custombutton" (click)="AddProductInfo(EnginnerQuoationMachineForm.form.valid)">
                                            <span class="glyphicon glyphicon-plus"></span>&nbsp;Add
                                        </button>
                                    </div>
                                </div>
                            </form>
                            <div class="table-responsive no-padding" style="margin-top:2.5em;">
                                <table class="table bidopen table-bordered">
                                    <thead>
                                        <tr style="background-color:#3c8dbc;color:white;">
                                            <th class="text-center" style="vertical-align:middle">Sl No.</th>
                                            <th class="text-center" style="vertical-align:middle">Location</th>
                                            <th class="text-center" style="vertical-align:middle">Mfg Name</th>
                                            <th class="text-center" style="vertical-align:middle">Machine Name</th>
                                            <th class="text-center" style="vertical-align:middle">Spare Parts</th>
                                            <th class="text-center" style="vertical-align:middle">Qty</th>
                                            <th class="text-center" style="vertical-align:middle">Rate</th>
                                            <th class="text-center" style="vertical-align:middle">Total Amount</th>
                                            <th class="text-center" style="vertical-align:middle">Disount Type</th>
                                            <th class="text-center" style="vertical-align:middle">Disount Amt</th>
                                            <th class="text-center" style="vertical-align:middle">Vat %</th>
                                            <th class="text-center" style="vertical-align:middle">Taxable Amt</th>
                                            <th class="text-center" style="vertical-align:middle">Delete</th>
                                        </tr>

                                    </thead>
                                    <tbody>
                                        <tr *ngFor="
                                        let d of EngQuoationProductList;
                                        let odd = odd;
                                        let index = index
                                      " [class.even]="odd">
                                            <td>{{ index + 1 }}</td>
                                            <td>{{ d.Location_Name }}</td>
                                            <td>{{ d.Mfg_Company ? d.Mfg_Company : '-' }}</td>
                                            <td>{{ d.Machine ? d.Machine : '-' }}</td>
                                            <td>{{ d.Spare_Part_Description ? d.Spare_Part_Description : '-' }}</td>
                                            <td>{{ d.Qty ? d.Qty : '-' }}</td>
                                            <td>{{ d.Rate ? d.Rate : '-' }}</td>
                                            <td>{{ d.Total_Amount ? d.Total_Amount : '-' }}</td>
                                            <td>{{ d.Discount_Type ? d.Discount_Type : '-' }}</td>
                                            <td>{{ d.Discount_Amount ? d.Discount_Amount : '-' }}</td>
                                            <td>{{ d.VAT ? d.VAT : '-' }}</td>
                                            <td>{{ d.Net_Amt ? d.Net_Amt : '-' }}</td>
                                            <td>
                                                <a (click)="Delete(index)">
                                                    <div><i class="fa fa-fw fa-trash"> </i></div>
                                                </a>
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <!-- <div class="col-sm-6"> -->
                            <div class="box-footer">
                                <button class="btn btn-primary pull-right" (click)="SaveEnggQuotation()" id="load" [disabled]="Spinner">
                                                            <p-progressSpinner *ngIf="Spinner" [style]="{width: '15px', height: '15px'}" strokeWidth="8"  animationDuration=".5s"></p-progressSpinner>
                                                        <span *ngIf="!Spinner" class="glyphicon glyphicon-save"></span>{{buttonname}}
                                                    </button>
                            </div>
                            <!-- </div> -->
                        </p-tabPanel>
                    </p-tabView>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Lead Creation -->
<p-dialog header="Create Customer" [appendTo]="'body'" [(visible)]="CustomerCreatePopup" [closeOnEscape]="true" [modal]="true" [responsive]="true"  [style]="{ width: '60%', minWidth: '250px' }" style="text-align: center;" [minY]="60">
    <div class="form-horizontal">
        <form name="LeadcreateForm" #LeadcreateForm="ngForm" novalidate>
            <div class="form-group" style="padding: 1em;">
                <h5 style="
                padding: 0.5em 1em;
                background: #c1c1c185;
                border-top: 5px solid #3c8dbc;
                border-bottom: 1px solid #c6c6c6;
                margin-top: 15px;
                ">
                <i class="fa fa-fw fa-fax">
                </i> &nbsp;<strong>Lead Details :</strong>
            </h5>
                <div class="col-sm-6">
                    <label class="control-label">Company Name<sup class="text-danger">*</sup></label>
                    <input type="text" class="form-control" name="company" #company="ngModel" [(ngModel)]="ObjLeadCreation.Org_Name" placeholder="Company Name" 
                           [ngClass]="{clearance: LeadcreateFormSubmitted && company?.errors?.required}" required />
                </div>
                <div class="col-sm-6">
                    <label class="control-label">Address<sup class="text-danger">*</sup></label>
                    <input class="form-control" name="Location" id='Location' [(ngModel)]="ObjLeadCreation.Address" #address Compacct-Place (setAddress)="getAddressOnChange($event)" placeholder="Address">
                    <!-- <input type="text" class="form-control" #location Compacct-Place (setAddress)="getAddressOnChange($event)" name="Location" placeholder="Address"  /> -->
                </div>
                <div class="col-sm-3">
                    <label class="control-label">Date <sup class="text-danger">*</sup></label>
                    <div class="input-group date">
                        <div class="input-group-addon">
                            <i class="fa fa-calendar"></i>
                        </div>

                        <input CompacctNepaliDatepicker id="Date" name="Date" Class="form-control" (ngModelChange)="Lead_Date= $event" [(ngModel)]="Lead_Date" />
                 </div>
                </div>
                <div class="col-sm-3">
                    <label class="control-label">Landmark</label>
                    <input type="text" class="form-control" name="landmark" #landmark="ngModel" [(ngModel)]="ObjLeadCreation.Landmark" placeholder="landmark" />
                </div>
                <div class="col-sm-3">
                    <label class="control-label">Lead Priority<sup class="text-danger">*</sup></label>
                    <select class="form-control" name="leadpriority" #leadpriority="ngModel" [(ngModel)]="ObjLeadCreation.Lead_Priority" [ngClass]="{'clearance': LeadcreateFormSubmitted && leadpriority.errors?.required}" required>
                                          <option  [ngValue]="undefined">Select</option>
                                          <option  value="Hot">Hot</option>
                                          <option  value="Warm">Warm</option>
                                          <option  value="Cold">Cold</option>
                                  </select>
                </div>
                <div class="col-sm-3">
                    <label class="control-label">Industry<sup class="text-danger">*</sup></label>
                    <select class="form-control" name="industry" #industry="ngModel" [(ngModel)]="ObjLeadCreation.Sub_Ledger_Cat_ID" [ngClass]="{'clearance': LeadcreateFormSubmitted && industry.errors?.required}" required>
                                          <option  [ngValue]="undefined">Select</option>
                                      <option *ngFor="let option of IndustryList" [ngValue]="option.Sub_Ledger_Cat_ID">
                                          {{option.Sub_Ledger_Cat_Name}}
                                          </option>
                                  </select>
                </div>
                <div class="col-sm-3">
                    <label class="control-label">Source<sup class="text-danger">*</sup></label>
                    <select class="form-control" name="source" #source="ngModel" [(ngModel)]="ObjLeadCreation.Enq_Source_ID" [ngClass]="{'clearance': LeadcreateFormSubmitted && source.errors?.required}" required>
                                          <option  [ngValue]="undefined">Select</option>
                                      <option *ngFor="let option of SourceList" [ngValue]="option.Enq_Source_ID">
                                          {{option.Enq_Source_Name}}
                                          </option>
                                  </select>
                </div>
                <div class="col-sm-3">
                    <label class="control-label">Website</label>
                    <input type="text" class="form-control" name="website" #website="ngModel" [(ngModel)]="ObjLeadCreation.Website" placeholder="Website"  
                           [ngClass]="{clearance: LeadcreateFormSubmitted && website?.errors?.required}"  />
                </div>
                </div>
            <div class="form-group" style="padding: 1em;">
                <h5 style="
                padding: 0.5em 1em;
                background: #c1c1c185;
                border-top: 5px solid #3c8dbc;
                border-bottom: 1px solid #c6c6c6;
                margin-top: 15px;
                ">
                <i class="fa fa-fw fa-fax">
                </i> &nbsp;<strong>Social Media Links :</strong>
            </h5>
                <div class="col-sm-4">
                    <label class="control-label">Facebook Link</label>
                    <input type="text" class="form-control" name="fblink" #fblink="ngModel" [(ngModel)]="ObjLeadCreation.Social_FaceBook_Link" placeholder="Facebook Link" />
                </div>
                <div class="col-sm-4">
                    <label class="control-label">Instagram Link</label>
                    <input type="text" class="form-control" name="instalink" #instalink="ngModel" [(ngModel)]="ObjLeadCreation.Social_Instagram_Link" placeholder="Instagram Link" />
                </div>
                <div class="col-sm-4">
                    <label class="control-label">Linkedin Link</label>
                    <input type="text" class="form-control" name="linkedinlink" #linkedinlink="ngModel" [(ngModel)]="ObjLeadCreation.Social_Linkedin_Link" placeholder="Linkedin Link" />
                </div>
                </div>

            <div class="form-group" style="padding: 1em;">
                <h5 style="
                padding: 0.5em 1em;
                background: #c1c1c185;
                border-top: 5px solid #3c8dbc;
                border-bottom: 1px solid #c6c6c6;
                margin-top: 15px;
                ">
                <i class="fa fa-fw fa-fax">
                </i> &nbsp;<strong>Contacts Info :</strong>
            </h5>
                <div class="col-sm-3">
                    <label class="control-label">Contact Person<sup class="text-danger">*</sup></label>
                    <input type="text" class="form-control" name="Contact_Person_Name" #contactpername="ngModel" [(ngModel)]="ObjLeadCreation.Contact_Name" placeholder="Contact Person Name" 
                    [ngClass]="{clearance: LeadcreateFormSubmitted && contactpername?.errors?.required}" required />
                </div>
                <div class="col-sm-3">
                    <label class="control-label">Designation<sup class="text-danger">*</sup></label>
                    <select class="form-control" name="designation" #designation="ngModel" [(ngModel)]="ObjLeadCreation.Desig" [ngClass]="{'clearance': LeadcreateFormSubmitted && designation.errors?.required}" required>
                      <option  [ngValue]="undefined">Select</option>
                      <option  value="Manager">Manager</option>
                      <option  value="Sales Person">Sales Person</option>
                      <option  value="Employee">Employee</option>
                    </select>
                </div>
                <div class="col-sm-3">
                    <label class="control-label">Phone<sup class="text-danger">*</sup></label>
                    <input type="text" class="form-control" name="phone" #phone="ngModel" CompacctDigitonly="true" maxlength="10" [(ngModel)]="ObjLeadCreation.Mobile" placeholder="Mobile Number" 
                    [ngClass]="{clearance: LeadcreateFormSubmitted && phone?.errors?.required}" required />
                </div>
                <div class="col-sm-3">
                    <label class="control-label">Email</label>
                    <input type="text" class="form-control" name="email" #email="ngModel" [(ngModel)]="ObjLeadCreation.Email" placeholder="Email Address" 
                    [ngClass]="{clearance: LeadcreateFormSubmitted && email?.errors?.required}" />
                </div>
                <div class="col-sm-5">
                    <label class="control-label">Land Line</label>
                    <div class="input-group" style="width:100%">
                    <select class="form-control" name="landline" #landline="ngModel" [(ngModel)]="ObjLeadCreation.Land_Line" >
                        <option  [ngValue]="undefined">Select</option>
                        <!-- <option  value="Manager">Manager</option>
                        <option  value="Sales Person">Sales Person</option>
                        <option  value="Employee">Employee</option> -->
                    </select>
                    <span class="input-group-addon" style="border-color: #ffffff; padding:0px"></span>
                    <input type="text" class="form-control" name="landlineno" #landlineno="ngModel" CompacctDigitonly="true" [(ngModel)]="ObjLeadCreation.Phone" placeholder="Phone Number" />
                </div>
                </div>
                </div>

                <div class="form-group" style="padding: 1em;">
                    <h5 style="
                    padding: 0.5em 1em;
                    background: #c1c1c185;
                    border-top: 5px solid #3c8dbc;
                    border-bottom: 1px solid #c6c6c6;
                    margin-top: 15px;
                    ">
                    <i class="fa fa-fw fa-fax">
                    </i> &nbsp;<strong>Lead Info :</strong>
                </h5>
                    <!-- <div class="col-sm-3">
                        <label class="control-label">Contact Person<sup class="text-danger">*</sup></label>
                        <input type="text" class="form-control" name="Contact_Person_Name" #contactpername="ngModel" [(ngModel)]="Facebook_Links" placeholder="Contact Person Name" 
                        [ngClass]="{clearance: CustomercreateFormSubmitted && contactpername?.errors?.required}" required />
                    </div> -->
                    <div class="form-group">
                    <div class="col-sm-3">
                        <label class="control-label">Assign To<sup class="text-danger">*</sup></label>
                        <select class="form-control" name="assignto" #assignto="ngModel" [(ngModel)]="ObjLeadCreation.Assign_TO" [ngClass]="{'clearance': LeadcreateFormSubmitted && assignto.errors?.required}" required>
                            <option  [ngValue]="undefined">Select</option>
                            <option *ngFor="let option of AssignToList" [ngValue]="option.Member_ID">
                              {{option.Member_Name}}
                            </option>
                    </select>
                    </div>
                    <div class="col-sm-4">
                        <label class="control-label">Product Groups 
                        </label>
                        <!-- <p-multiSelect itemSize="30" [options]="ProductGrpFilter" [styleClass]="'compacct-multiselect'" name="ProGrp" #ProGrp="ngModel" [(ngModel)]="Product_Groups" (onChange)="filterProGrpList()" [filter]="true" filterBy="label,value.name" [resetFilterOnHide]="true">
                        </p-multiSelect> -->
                        <p-multiSelect itemSize="30" [options]="ProductGrpList" [styleClass]="'compacct-multiselect'" name="ProGrp" #ProGrp="ngModel" [(ngModel)]="ObjLeadCreation.Product_Type_IDs" [filter]="true" filterBy="label,value.name"  [resetFilterOnHide]="true" [ngClass]="{'clearance': LeadcreateFormSubmitted && ProGrp.errors?.required}" >
                        </p-multiSelect>
                        <!-- <div class="col-sm-4">
                  <label class="control-label">Indent List <span class="text-danger"></span></label>
                  <p-multiSelect [options]="DistProductType"  [(ngModel)]="SelectedDistProductType"
                    itemSize="30" (onChange)='FilterDist()'[styleClass]="'compacct-multiselect'"
                    name="Product_Type"></p-multiSelect>
                </div> -->

                    </div>
                    <div class="col-sm-5">
                        <label class="control-label">Existing</label> <br>
                        <div style="margin-top: 10px; margin-left: 25px">
                         <input type="radio" name="exit" value="Competitor" [(ngModel)]="ObjLeadCreation.Existing" (change)="existingchange()">
                         <label style="font-weight: 400;">Competitor</label>&nbsp;&nbsp;&nbsp;&nbsp;
                         <input type="radio" name="exit" value="Trader" [(ngModel)]="ObjLeadCreation.Existing" (change)="existingchange()">
                         <label style="font-weight: 400;">Trader</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                         <input type="radio" name="exit" value="Other" [(ngModel)]="ObjLeadCreation.Existing" (change)="existingchange()">
                         <label style="font-weight: 400;">Other</label>   
                        </div>                                          
                    </div>
                    </div>
                    <div class="form-group">
                    <div class="col-sm-3">
                        <label class="control-label">{{existingname}}<sup class="text-danger">*</sup></label>
                        <input type="text" class="form-control" name="exitchange" #exitchange="ngModel" [(ngModel)]="ObjLeadCreation.Existing_Name" placeholder={{existingname}} 
                        (keypress)="letterOnly($event)" [ngClass]="{clearance: LeadcreateFormSubmitted && exitchange?.errors?.required}" required />
                    </div>
                    <div class="col-sm-5">
                        <label class="control-label">Competition Activity</label>
                        <textarea class="form-control" name="compact" #compact="ngModel" [(ngModel)]="ObjLeadCreation.Competition_Activity" placeholder="Competition Activity" [ngClass]="{'clearance': LeadcreateFormSubmitted && compact.errors?.required}"></textarea>
                        <!-- <input type="text" class="form-control" name="compact" #compact="ngModel" [(ngModel)]="ObjLeadCreation.Competition_Activity" placeholder="Competition Activity" 
                        [ngClass]="{clearance: CustomercreateFormSubmitted && compact?.errors?.required}" required /> -->
                    </div>
                    </div>
                    </div>
                    <!-- <div class="form-group" style="padding: 1em;">
                        <h5 style="
                        padding: 0.5em 1em;
                        background: #c1c1c185;
                        border-top: 5px solid #3c8dbc;
                        border-bottom: 1px solid #c6c6c6;
                        margin-top: 15px;
                        ">
                        <i class="fa fa-fw fa-fax">
                        </i> &nbsp;<strong>Task Info  :</strong>
                    </h5>
                    <div class="col-sm-4">
                        <label class="control-label">Subject<sup class="text-danger">*</sup></label>
                        <select class="form-control" name="subjetc" #subjetc="ngModel" [(ngModel)]="ObjLeadCreation.Subject" [ngClass]="{'clearance': EnginnerQuoationMachineFormSubmitted && subjetc.errors?.required}" required>
                                <option  [ngValue]="undefined">Select</option>
                                <option *ngFor="let option of SubjectList" [ngValue]="option.Subject_ID">
                                 {{option.Subject}}
                                </option>
                        </select>
                    </div>
                        <div class="col-sm-4">
                            <label class="control-label">Task From Date <sup class="text-danger">*</sup></label>
                            <div class="input-group date">
                                <div class="input-group-addon">
                                    <i class="fa fa-calendar"></i>
                                </div>
                                <input type="date" class="form-control" name="TaskFromDate" [(ngModel)]="Task_From_Date" [ngClass]="{'clearance': EnginnerQuoationMachineFormSubmitted && TaskFromDate.errors?.required}" required>
                         </div>
                        </div>
                        <div class="col-sm-4">
                            <label class="control-label">Task To Date <sup class="text-danger">*</sup></label>
                            <div class="input-group date">
                                <div class="input-group-addon">
                                    <i class="fa fa-calendar"></i>
                                </div>
                                <input type="date" class="form-control" name="TaskToDate" [(ngModel)]="Task_To_Date" [ngClass]="{'clearance': EnginnerQuoationMachineFormSubmitted && TaskFromDate.errors?.required}" required>
                         </div>
                        </div>
                        <div class="col-sm-4">
                            <label class="control-label">Task Priority <sup class="text-danger">*</sup></label>
                            <select class="form-control" name="taskpriority" #taskpriority="ngModel" [(ngModel)]="ObjLeadCreation.Task_Priority" [ngClass]="{'clearance': EnginnerQuoationMachineFormSubmitted && taskpriority.errors?.required}" required>
                                                  <option  [ngValue]="undefined">Select</option>
                                                  <option  value="High">High</option>
                                                  <option  value="Medium">Medium</option>
                                                  <option  value="Low">Low</option>
                                          </select>
                        </div>
                        </div> -->

        </form>
    </div>
    <p-footer>
        <button type="button" (click)="CustomerCreatePopup = false" class="btn btn-default">
  Close
</button>
        <button type="submit" name="bill" class="btn btn-primary pull-right custombutton" (click)="SaveLeadCreation(LeadcreateForm.form.valid)" id="load2" [disabled]="Spinner">
<p-progressSpinner
  *ngIf="Spinner"
  [style]="{ width: '15px', height: '15px' }"
  strokeWidth="8"
  animationDuration=".5s"
></p-progressSpinner>
<span
  *ngIf="!Spinner"
  class="glyphicon glyphicon-save"
></span
>&nbsp;Save
</button>
    </p-footer>
</p-dialog>